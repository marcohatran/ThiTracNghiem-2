
@{
    ViewBag.Title = "Result";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}

<h2>Result</h2>

@using Model.ViewModel;
@model IEnumerable<Model.ViewModel.StudentThreadViewModel>

@{
    ViewBag.Title = "Index";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}
@section css
    {
    <!-- JQuery DataTable Css -->
    <link href="/Assets/admin/plugins/jquery-datatable/skin/bootstrap/css/dataTables.bootstrap.css" rel="stylesheet">
    <!-- Sweetalert Css -->
    <link href="/Assets/admin/plugins/sweetalert/sweetalert.css" rel="stylesheet" />
}
@section title
    {
    <title>Quản lý kỳ thi</title>
}



<!-- Exportable Table -->
<div class="row clearfix">
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <div class="card">
            <div class="header">
                <h2>
                    DANH SÁCH CÁC KỲ THI TRONG KHOA CNTT
                </h2>
                <ul class="header-dropdown m-r--5">
                    <li class="dropdown">
                        <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                            <i class="material-icons">more_vert</i>
                        </a>
                        <ul class="dropdown-menu pull-right">
                            <li><a href="javascript:void(0);">Action</a></li>
                            <li><a href="javascript:void(0);">Another action</a></li>
                            <li><a href="javascript:void(0);">Something else here</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
            <div class="body">

                <div class="table-responsive">
                    <table class="table table-bordered table-striped table-hover dataTable js-exportable">
                        <thead>
                            <tr>
                                <th style="width: 3%">ID</th>
                                <th style="width: 24%">Tên</th>
                                <th style="width: 12%">Tên môn thi</th>
                                <th style="width: 8%">Số câu hỏi</th>
                                <th style="width: 8%">Số bài thi</th>
                                <th style="width: 10%">Thời gian làm bài</th>
                                <th style="width: 20%">Tùy chọn</th>
                            </tr>
                        </thead>

                        <tbody>
                            @if (Model.Count() > 0)
                            {
                                var tmp = Model.FirstOrDefault();
                                int count = 0;
                                foreach (var item in Model)
                                {
                                    if (tmp.thread.id_thread == item.thread.id_thread) { count++; }
                                    else
                                    {


                                        <tr>
                                            <td>@Html.DisplayFor(modelItem => tmp.thread.id_thread)</td>
                                            <td> @Html.DisplayFor(modelItem => tmp.thread.thread_name)</td>
                                            <td>@Html.DisplayFor(modelItem => tmp.subject.subject_name)</td>
                                            <td>@Html.DisplayFor(modelItem => tmp.thread.max_question)</td>
                                            <td>@count.ToString()</td>
                                            <td>@Html.DisplayFor(modelItem => tmp.thread.time_to_do) phút</td>
                                            <td>
                                                <a href="/Admin/Thread/DownloadResult/@tmp.thread.id_thread" class="btn bg-deep-purple waves-effect"><i class="material-icons">file_download</i> <span>Tải về kết quả</span></a>
                                            </td>
                                        </tr>
                                        count = 1;
                                    }
                                    tmp = item;
                                }

                                <tr>
                                    <td>@Html.DisplayFor(modelItem => tmp.thread.id_thread)</td>
                                    <td> @Html.DisplayFor(modelItem => tmp.thread.thread_name)</td>
                                    <td>@Html.DisplayFor(modelItem => tmp.subject.subject_name)</td>
                                    <td>@Html.DisplayFor(modelItem => tmp.thread.max_question)</td>
                                    <td>@count.ToString()</td>
                                    <td>@Html.DisplayFor(modelItem => tmp.thread.time_to_do) phút</td>
                                    <td>
                                        <a href="/Admin/Thread/DownloadResult/@tmp.thread.id_thread" class="btn bg-deep-purple waves-effect"><i class="material-icons">file_download</i> <span>Tải về kết quả</span></a>
                                    </td>
                                </tr>

                            }
                        </tbody>
                    </table>
                </div>
                <div>
                </div> <!--#BODY-->
            </div>
        </div>
    </div>
</div>
<!-- #END# Exportable Table -->
<!-- Jquery Core Js -->
<script src="/Assets/admin/plugins/jquery/jquery.min.js"></script>
<script src="~/Scripts/jquery.unobtrusive-ajax.min.js"></script>
<!-- Bootstrap Core Js -->
<script src="/Assets/admin/plugins/bootstrap/js/bootstrap.js"></script>
<!-- Select Plugin Js -->
<script src="/Assets/admin/plugins/bootstrap-select/js/bootstrap-select.js"></script>
<!-- Slimscroll Plugin Js -->
<script src="/Assets/admin/plugins/jquery-slimscroll/jquery.slimscroll.js"></script>
<!-- Waves Effect Plugin Js -->
<script src="/Assets/admin/plugins/node-waves/waves.js"></script>
<!-- SweetAlert Plugin Js -->
<script src="/Assets/admin/plugins/sweetalert/sweetalert.min.js"></script>
<!-- Bootstrap Notify Plugin Js -->
<script src="/Assets/admin/plugins/bootstrap-notify/bootstrap-notify.js"></script>

<!-- Jquery DataTable Plugin Js -->
<script src="/Assets/admin/plugins/jquery-datatable/jquery.dataTables.js"></script>
<script src="/Assets/admin/plugins/jquery-datatable/skin/bootstrap/js/dataTables.bootstrap.js"></script>
<script src="/Assets/admin/plugins/jquery-datatable/extensions/export/dataTables.buttons.min.js"></script>
<script src="/Assets/admin/plugins/jquery-datatable/extensions/export/buttons.flash.min.js"></script>
<script src="/Assets/admin/plugins/jquery-datatable/extensions/export/jszip.min.js"></script>
<script src="/Assets/admin/plugins/jquery-datatable/extensions/export/pdfmake.min.js"></script>
<script src="/Assets/admin/plugins/jquery-datatable/extensions/export/vfs_fonts.js"></script>
<script src="/Assets/admin/plugins/jquery-datatable/extensions/export/buttons.html5.min.js"></script>
<script src="/Assets/admin/plugins/jquery-datatable/extensions/export/buttons.print.min.js"></script>
<script src="~/Scripts/jquery.unobtrusive-ajax.min.js"></script>
<!-- Custom Js -->
<script src="/Assets/admin/js/admin.js"></script>

<script src="/Assets/admin/js/pages/ui/dialogs.js"></script>
<script src="/Assets/admin/js/pages/tables/jquery-datatable.js"></script>
@if (TempData["NoticeMessage"] != null)
{


    <script>
        $.notify({

            title: '<strong>Thông báo: </strong> ',
            message: '@TempData["NoticeMessage"]'
        }, {
            type: '@TempData["NoticeType"]',
            delay: 3000,
            template: '<div data-notify="container" class="col-xs-11 col-sm-2 alert alert-{0}" role="alert">' +
                '<span data-notify="title">{1}</span>' +
                '<span data-notify="message">{2}</span>' +
            '</div>'
        });
    </script>

}
<!-- Demo Js -->
<script src="/Assets/admin/js/demo.js"></script>